name: üì¢ Discord Notifier

on:
  workflow_run:
    workflows: 
      - "üõ°Ô∏è DevSecOps & Governance"
      - "Deploy"
    types:
      - completed

jobs:
  on-completion:
    runs-on: ubuntu-latest
    steps:
      - name: üîî Send Discord Notification
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          status: ${{ github.event.workflow_run.conclusion == 'success' && 'Success' || 'Failure' }}
          title: "${{ github.event.workflow_run.name }}"
          
          description: "Execu√ß√£o finalizada na branch **${{ github.event.workflow_run.head_branch }}**."
          
          image: ${{ github.event.workflow_run.conclusion == 'failure' && 'https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExajBxbjB2dXU0eG0zNmpxM3dlcXgyM2k1NWN3b3dlNG1udGFzcHdmZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/zvBuF2oYRErVS/giphy.gif' || 'https://media.giphy.com/media/xT5LMHxhOfscxPfIfm/giphy.gif' }}
          
          color: ${{ github.event.workflow_run.conclusion == 'failure' && '0xff0000' || '0x00ff00' }}
          
          url: ${{ github.event.workflow_run.html_url }}
